{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "description": "Small multiples of donut charts showing each state's share of vehicles, area, and population, with totals and key findings.",
  
  "data": {
    "url": "https://raw.githubusercontent.com/amosyap/FIT3179-DV2/refs/heads/main/data/DV2_Dataset.csv",
    "format": {"type": "csv"}
  },
  "title": {
    "text": "State Distribution by Vehicles, Area, and Population",
    "anchor": "middle",
    "fontSize": 24,
    "fontWeight": "bold",
    "dy": -20
  },
  "spacing": 10,
  "hconcat": [
    {
      "vconcat": [
        {
          "width": 250,
          "height": 250,
          "transform": [
            {"joinaggregate": [{"op": "sum", "field": "registered_motor_cars", "as": "total_vehicles"}]}
          ],
          "layer": [
            {
              "mark": {"type": "arc", "innerRadius": 80, "outerRadius": 120},
              "encoding": {
                "theta": {"field": "registered_motor_cars", "type": "quantitative", "stack": "normalize"},
                "color": {
                  "field": "state",
                  "type": "nominal",
                  "legend": null,
                  "scale": {
                    "range": [
                      "#1f77b4", "#ff7f0e", "#d62728", "#9467bd", "#8c564b", "#e377c2",
                      "#7f7f7f", "#17becf", "#ff9896", "#c5b0d5", "#c49c94", "#f7b6d2",
                      "#9edae5", "#ffbb78", "#a55194", "#393b79"
                    ]
                  }
                },
                "tooltip": [
                  {"field": "state", "type": "nominal", "title": "State"},
                  {"field": "registered_motor_cars", "type": "quantitative", "title": "Vehicles", "format": ","}
                ]
              }
            },
            {
              "layer": [
                {
                  "mark": {"type": "text", "fontSize": 20, "fontWeight": "bold", "align": "center"},
                  "encoding": {
                    "text": {"field": "total_vehicles", "type": "quantitative", "aggregate": "min", "format": ",.0f"}
                  }
                },
                {
                  "mark": {"type": "text", "fontSize": 14, "dy": 20, "align": "center"},
                  "encoding": {"text": {"value": "vehicles"}}
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "vconcat": [
        {
          "width": 250,
          "height": 250,
          "transform": [
            {"joinaggregate": [{"op": "sum", "field": "state_area", "as": "total_area"}]}
          ],
          "layer": [
            {
              "mark": {"type": "arc", "innerRadius": 80, "outerRadius": 120},
              "encoding": {
                "theta": {"field": "state_area", "type": "quantitative", "stack": "normalize"},
                "color": {
      "field": "state",
      "type": "nominal",
      "legend": null,
      "scale": {
        "range": [
          "#1f77b4", "#ff7f0e", "#d62728", "#9467bd", "#8c564b", "#e377c2",
          "#7f7f7f", "#17becf", "#ff9896", "#c5b0d5", "#c49c94", "#f7b6d2",
          "#9edae5", "#ffbb78", "#a55194", "#393b79"
        ]
      }
    },
                "tooltip": [
                  {"field": "state", "type": "nominal", "title": "State"},
                  {"field": "state_area", "type": "quantitative", "title": "Area (km2)", "format": ","}
                ]
              }
            },
            {
              "layer": [
                {
                  "mark": {"type": "text", "fontSize": 20, "fontWeight": "bold", "align": "center"},
                  "encoding": {
                    "text": {"field": "total_area", "type": "quantitative", "aggregate": "min", "format": ",.0f"}
                  }
                },
                {
                  "mark": {"type": "text", "fontSize": 14, "dy": 20, "align": "center"},
                  "encoding": {"text": {"value": "km2"}}
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "vconcat": [
        {
          "width": 250,
          "height": 250,
          "transform": [
            {"joinaggregate": [{"op": "sum", "field": "state_population", "as": "total_population"}]}
          ],
          "layer": [
            {
              "mark": {"type": "arc", "innerRadius": 80, "outerRadius": 120},
              "encoding": {
                "theta": {"field": "state_population", "type": "quantitative", "stack": "normalize"},
                "color": {
      "field": "state",
      "type": "nominal",
      "legend": null,
      "scale": {
        "range": [
          "#1f77b4", "#ff7f0e", "#d62728", "#9467bd", "#8c564b", "#e377c2",
          "#7f7f7f", "#17becf", "#ff9896", "#c5b0d5", "#c49c94", "#f7b6d2",
          "#9edae5", "#ffbb78", "#a55194", "#393b79"
        ]
      }
    },
                "tooltip": [
                  {"field": "state", "type": "nominal", "title": "State"},
                  {"field": "state_population", "type": "quantitative", "title": "Population", "format": ","}
                ]
              }
            },
            {
              "layer": [
                {
                  "mark": {"type": "text", "fontSize": 20, "fontWeight": "bold", "align": "center"},
                  "encoding": {
                    "text": {"field": "total_population", "type": "quantitative", "aggregate": "min", "format": ",.0f"}
                  }
                },
                {
                  "mark": {"type": "text", "fontSize": 14, "dy": 20, "align": "center"},
                  "encoding": {"text": {"value": "population"}}
                }
              ]
            }
          ]
        }
      ]
    }
  ]
  
}